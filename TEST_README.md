# ุชุณุช SMS Webhook

ูุงูโูุง ุชุณุช ุจุฑุง ุจุฑุฑุณ ุนููฺฉุฑุฏ webhook ู ุงุฑุณุงู SMS.

## ๐ ูุงูโูุง ุชุณุช

### 1. `test_simple_sms.py` - ุชุณุช ุณุงุฏู
ุชุณุช ุณุฑุน ู ุณุงุฏู ุจุฑุง ุจุฑุฑุณ ุนููฺฉุฑุฏ ุงููู.

```bash
python test_simple_sms.py
```

**ูฺฺฏโูุง:**
- โ Health Check
- โ ุชุณุช SMS ุจุง ุดูุงุฑู ูุนุชุจุฑ
- โ ุชุณุช User ID ุฎุงู
- โ ุชุณุช Admin ID

### 2. `test_sms_webhook.py` - ุชุณุช ุฌุงูุน
ุชุณุช ฺฉุงูู ู ุฌุงูุน ุจุฑุง ุจุฑุฑุณ ุชูุงู ูุงุจูุชโูุง.

```bash
python test_sms_webhook.py
```

**ูฺฺฏโูุง:**
- โ Health Check
- โ ุชุณุช SMS ุชฺฉ
- โ ุชุณุช SMS ฺูุฏฺฏุงูู
- โ ุชุณุช ุฌููฺฏุฑ ุงุฒ Duplicate
- โ ุชุณุช ุดูุงุฑู ูุงูุนุชุจุฑ
- โ ุชุณุช User ID ุฎุงู
- โ ฺฏุฒุงุฑุดโฺฏุฑ ฺฉุงูู

## ๐ ูุญูู ุงุฌุฑุง

### 1. ุงุฌุฑุง ุณุฑูุฑ
```bash
# ุฏุฑ terminal ุงูู
go run cmd/server/main.go
```

### 2. ุงุฌุฑุง ุชุณุช
```bash
# ุฏุฑ terminal ุฏูู
python test_simple_sms.py
# ุง
python test_sms_webhook.py
```

## ๐ ูุชุงุฌ ููุฑุฏ ุงูุชุธุงุฑ

### โ ุชุณุชโูุง ูููู:
- Health Check: 200 OK
- SMS ูุนุชุจุฑ: 200 OK + SMS ุงุฑุณุงู ูโุดูุฏ
- User ID ุฎุงู: 200 OK + SMS ุจุง "ฺฉุงุฑุจุฑ ฺฏุฑุงู"

### โ ุชุณุชโูุง ูุงูููู:
- ุดูุงุฑู ูุงูุนุชุจุฑ: 200 OK + SMS ุงุฑุณุงู ููโุดูุฏ
- Duplicate SMS: 200 OK + SMS block ูโุดูุฏ

## ๐ ุจุฑุฑุณ Logs

ุจุฑุง ุจุฑุฑุณ ุฌุฒุฆุงุชุ logs ุณุฑูุฑ ุฑุง ฺฺฉ ฺฉูุฏ:

```bash
# ุฏุฑ terminal ุณุฑูุฑ
# logs JSON format ููุงุด ุฏุงุฏู ูโุดูุฏ
```

**Logs ููู:**
- `๐ฒ SMS SENDING INITIATED` - ุดุฑูุน ุงุฑุณุงู SMS
- `โ SMS SENT SUCCESSFULLY` - SMS ูููู
- `โ SMS SEND FAILED` - SMS ูุงูููู
- `๐ซ SMS BLOCKED - ALREADY SENT TODAY` - SMS block ุดุฏู

## ๐๏ธ ุชูุธูุงุช ุชุณุช

### ุชุบุฑ URL:
```python
WEBHOOK_URL = "http://localhost:8080/webhook"
HEALTH_URL = "http://localhost:8080/health"
```

### ุชุบุฑ ุดูุงุฑูโูุง ุชุณุช:
```python
TEST_PHONE_NUMBERS = [
    "09123456789",
    "09987654321", 
    "09155520952",
    # ุดูุงุฑูโูุง ุฎูุฏ ุฑุง ุงุถุงูู ฺฉูุฏ
]
```

### ุชุบุฑ User ID ูุง ุชุณุช:
```python
TEST_USER_IDS = [
    "76599340",  # Admin ID
    "123456789",
    "987654321",
    # User ID ูุง ุฎูุฏ ุฑุง ุงุถุงูู ฺฉูุฏ
]
```

## ๐ฑ ุชุณุช Pattern Management

### 1. ุชุณุช Pattern ูุนู:
```bash
# ุฏุฑ Telegram
/start
๐ฑ ูพุชุฑู ุงูุฑูุฒ
```

### 2. ุชุบุฑ Pattern:
```bash
# ุฏุฑ Telegram
โก๏ธ ุจุฑู ุจู ูพุชุฑู ุจุนุฏ
```

### 3. ูุณุช Pattern ูุง:
```bash
# ุฏุฑ Telegram
๐ ูุณุช ูพุชุฑูโูุง
```

## ๐ง ุนุจโุงุจ

### ูุดฺฉู: Connection Error
```
โ ุฎุทุง ุงุชุตุงู - ูุทูุฆู ุดูุฏ ุณุฑูุฑ ุฑู http://localhost:8080 ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช
```
**ุฑุงู ุญู:** ุณุฑูุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ

### ูุดฺฉู: SMS ุงุฑุณุงู ููโุดูุฏ
**ุจุฑุฑุณ ฺฉูุฏ:**
- SMS service ูุนุงู ุงุณุช (`enabled: true`)
- API key ุตุญุญ ุงุณุช
- Pattern ุชูุธู ุดุฏู ุงุณุช
- Originator ุชูุธู ุดุฏู ุงุณุช

### ูุดฺฉู: Pattern ุชุบุฑ ููโฺฉูุฏ
**ุจุฑุฑุณ ฺฉูุฏ:**
- ุฑุจุงุช ุชูฺฏุฑุงู ุงุฌุฑุง ุดุฏู ุงุณุช
- Admin ID ุตุญุญ ุงุณุช
- Config ุฏุฑุณุช load ุดุฏู ุงุณุช

## ๐ ูุซุงู ุฎุฑูุฌ

```
๐งช ุดุฑูุน ุชุณุช ุฌุงูุน SMS Webhook
============================================================

๐ฅ ุชุณุช Health Check...
โ Health Check ูููู!
๐ Status: healthy
โฐ Timestamp: 2025-01-17T15:30:45Z

============================================================
1๏ธโฃ ุชุณุช SMS ุชฺฉ
๐ ุชุณุช SMS - 09123456789 (User: 76599340)
๐ฑ ุดูุงุฑู: 09123456789
๐ค User ID: 76599340
๐ฅ Response Status: 200
โฑ๏ธ Response Time: 45.23ms
โ Webhook ูููู!
๐ Response: {
  "status": "success",
  "message": "Webhook processed successfully"
}
โ Webhook ูููู!
```

## ๐ฏ ูฺฉุงุช ููู

1. **ุณุฑูุฑ ุจุงุฏ ุงุฌุฑุง ุจุงุดุฏ** ูุจู ุงุฒ ุงุฌุฑุง ุชุณุช
2. **SMS service ุจุงุฏ ูุนุงู ุจุงุดุฏ** ุฏุฑ config
3. **Pattern ุจุงุฏ ุชูุธู ุดุฏู ุจุงุดุฏ** ุฏุฑ config
4. **API key ุจุงุฏ ุตุญุญ ุจุงุดุฏ** ุจุฑุง IPPanel
5. **Logs ุฑุง ุจุฑุฑุณ ฺฉูุฏ** ุจุฑุง ุฌุฒุฆุงุช ุจุดุชุฑ

## ๐ ูพุดุชุจุงู

ุงฺฏุฑ ูุดฺฉู ุฏุงุดุชุฏ:
1. Logs ุณุฑูุฑ ุฑุง ฺฺฉ ฺฉูุฏ
2. Config ุฑุง ุจุฑุฑุณ ฺฉูุฏ
3. Health check ุฑุง ุชุณุช ฺฉูุฏ
4. Pattern management ุฑุง ฺฺฉ ฺฉูุฏ
